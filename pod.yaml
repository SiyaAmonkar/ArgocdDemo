apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: run-workflow
  annotations:
    argocd.argoproj.io/hook: PreSync
spec:
  entrypoint: argo
  templates:
  - name: argo
    script:
      image: ubuntu:latest
      command: [sh]
      source: |
        apt-get update
        apt-get install git -y
        apt-get install curl -yy
        git clone https://github.com/SiyaAmonkar/ArgocdDemo.git
        curl -sLO https://github.com/argoproj/argo/releases/download/v3.0.2/argo-linux-amd64.gz
        gunzip argo-linux-amd64.gz
        chmod +x argo-linux-amd64
        mv ./argo-linux-amd64 /usr/local/bin/argo
        argo list
        argo template delete workflow-template-submittable
        argo cron delete test-cron-wf
